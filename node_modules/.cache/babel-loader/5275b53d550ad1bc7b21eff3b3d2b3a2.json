{"ast":null,"code":"import _classCallCheck from \"E:\\\\dito\\\\front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\dito\\\\front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\dito\\\\front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\dito\\\\front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\dito\\\\front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\dito\\\\front\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport Card from './components/Card';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.ordenacao = function (a, b) {\n      if (a.timestamp > b.timestamp) {\n        return 1;\n      }\n\n      if (a.timestamp < b.timestamp) {\n        return -1;\n      }\n\n      return 0;\n    };\n\n    _this.state = {\n      data: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.api.loadEvents().then(function (res) {\n        var events = res.data.events;\n        var compras = events.filter(function (comprou) {\n          if (comprou.event === 'comprou') {\n            comprou.produtos = events.filter(function (comprouProduto) {\n              return comprouProduto.event === 'comprou-produto';\n            }).filter(function (e) {\n              var agrupamentoProd = e.custom_data.filter(function (d) {\n                return d.key === 'transaction_id' && d.value === comprou.custom_data.filter(function (x) {\n                  return x.key === 'transaction_id';\n                })[0].value;\n              });\n\n              if (agrupamentoProd.length > 0) {\n                e.productName = e.custom_data.filter(function (p) {\n                  return p.key === 'product_name';\n                })[0].value;\n                e.productPrice = e.custom_data.filter(function (p) {\n                  return p.key === 'product_price';\n                })[0].value;\n                return e;\n              }\n\n              return false;\n            });\n            comprou.storeName = comprou.custom_data.filter(function (p) {\n              return p.key === 'store_name';\n            })[0].value;\n            comprou.data = moment(comprou.timestamp).format('DD/MM/YYYY H:m');\n            return comprou;\n          }\n\n          return false;\n        }).sort(_this2.ordenacao);\n\n        _this2.setState({\n          data: compras\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(Card, {\n        compras: this.state.data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["E:\\dito\\front\\src\\App.js"],"names":["React","Component","moment","Card","App","props","ordenacao","a","b","timestamp","state","data","api","loadEvents","then","res","events","compras","filter","comprou","event","produtos","comprouProduto","e","agrupamentoProd","custom_data","d","key","value","x","length","productName","p","productPrice","storeName","format","sort","setState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport moment from 'moment'\n\nimport Card from './components/Card'\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      data: []\n    }\n  }\n \n  componentDidMount() {\n    this.props.api.loadEvents()\n      .then(res => {\n        const { events } = res.data\n\n        const compras = events.filter(comprou => {\n          if (comprou.event === 'comprou') {\n            comprou.produtos = events.filter(comprouProduto => comprouProduto.event === 'comprou-produto')\n              .filter(e => {\n                const agrupamentoProd = e.custom_data\n                  .filter(d => d.key === 'transaction_id' && d.value === (comprou.custom_data\n                    .filter(x => x.key === 'transaction_id'))[0].value)\n                if (agrupamentoProd.length > 0) {\n                  e.productName = (e.custom_data.filter(p => p.key === 'product_name'))[0].value\n                  e.productPrice = (e.custom_data.filter(p => p.key === 'product_price'))[0].value\n  \n                  return e\n                }\n                return false\n            })\n            comprou.storeName = (comprou.custom_data.filter(p => p.key === 'store_name'))[0].value\n            comprou.data = moment(comprou.timestamp).format('DD/MM/YYYY H:m')\n            \n            return comprou;\n          }\n          return false\n        }).sort(this.ordenacao)\n\n        this.setState({ data: compras })\n      })\n  }\n\n  ordenacao = (a, b) => {\n    if (a.timestamp > b.timestamp) {\n      return 1\n    }\n    if (a.timestamp < b.timestamp) {\n      return -1\n    }\n    \n    return 0\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Card compras={this.state.data} />\n      </div>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}