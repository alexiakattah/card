{"ast":null,"code":"var _jsxFileName = \"E:\\\\dito\\\\front\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport Card from './components/Card';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.ordenacao = (a, b) => {\n      if (a.timestamp > b.timestamp) {\n        return 1;\n      }\n\n      if (a.timestamp < b.timestamp) {\n        return -1;\n      }\n\n      return 0;\n    };\n\n    this.state = {\n      data: []\n    };\n  }\n\n  componentDidMount() {\n    this.props.api.loadEvents().then(res => {\n      const events = res.data.events;\n      const compras = events.filter(comprou => {\n        if (comprou.event === 'comprou') {\n          comprou.produtos = events.filter(comprouProduto => comprouProduto.event === 'comprou-produto').filter(e => {\n            const agrupamentoProd = e.custom_data.filter(d => d.key === 'transaction_id' && d.value === comprou.custom_data.filter(x => x.key === 'transaction_id')[0].value);\n\n            if (agrupamentoProd.length > 0) {\n              e.productName = e.custom_data.filter(p => p.key === 'product_name')[0].value;\n              e.productPrice = e.custom_data.filter(p => p.key === 'product_price')[0].value;\n              return e;\n            }\n\n            return false;\n          });\n          comprou.storeName = comprou.custom_data.filter(p => p.key === 'store_name')[0].value;\n          comprou.data = moment(comprou.timestamp).format('DD/MM/YYYY H:m');\n          return comprou;\n        }\n\n        return false;\n      }).sort(this.ordenacao);\n      this.setState({\n        data: compras\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(Card, {\n      compras: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["E:\\dito\\front\\src\\App.js"],"names":["React","Component","moment","Card","App","constructor","props","ordenacao","a","b","timestamp","state","data","componentDidMount","api","loadEvents","then","res","events","compras","filter","comprou","event","produtos","comprouProduto","e","agrupamentoProd","custom_data","d","key","value","x","length","productName","p","productPrice","storeName","format","sort","setState","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport moment from 'moment'\n\nimport Card from './components/Card'\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      data: []\n    }\n  }\n \n  componentDidMount() {\n    this.props.api.loadEvents()\n      .then(res => {\n        const { events } = res.data\n\n        const compras = events.filter(comprou => {\n          if (comprou.event === 'comprou') {\n            comprou.produtos = events.filter(comprouProduto => comprouProduto.event === 'comprou-produto')\n              .filter(e => {\n                const agrupamentoProd = e.custom_data\n                  .filter(d => d.key === 'transaction_id' && d.value === (comprou.custom_data\n                    .filter(x => x.key === 'transaction_id'))[0].value)\n                if (agrupamentoProd.length > 0) {\n                  e.productName = (e.custom_data.filter(p => p.key === 'product_name'))[0].value\n                  e.productPrice = (e.custom_data.filter(p => p.key === 'product_price'))[0].value\n  \n                  return e\n                }\n                return false\n            })\n            comprou.storeName = (comprou.custom_data.filter(p => p.key === 'store_name'))[0].value\n            comprou.data = moment(comprou.timestamp).format('DD/MM/YYYY H:m')\n            \n            return comprou;\n          }\n          return false\n        }).sort(this.ordenacao)\n\n        this.setState({ data: compras })\n      })\n  }\n\n  ordenacao = (a, b) => {\n    if (a.timestamp > b.timestamp) {\n      return 1\n    }\n    if (a.timestamp < b.timestamp) {\n      return -1\n    }\n    \n    return 0\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Card compras={this.state.data} />\n      </div>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}